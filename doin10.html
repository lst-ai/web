<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LSTÈÅäÊà≤ÂÆ§-üï∞Ô∏è „ÄäÊäΩÂ±úÂºèÊôÇÂÖâÊ©ü„ÄãÊ≠∑Âè≤ÁØ°ÊîπË™øÊü•Â±Ä</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
        
        * {
            font-family: 'Noto Sans TC', sans-serif;
            box-sizing: border-box;
        }
        
        body {
            background-color: #f0e6d2;
            overflow-x: hidden;
        }
        
        .drawer {
            transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            cursor: pointer;
        }
        
        .drawer:hover {
            transform: translateY(10px);
        }
        
        .time-machine {
            opacity: 0;
            transition: opacity 0.5s, transform 1s;
            transform: scale(0.8);
        }
        
        .time-portal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle, #4a00e0, #8e2de2);
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s;
            z-index: 50;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .time-portal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .portal-inner {
            width: 80vmin;
            height: 80vmin;
            border-radius: 50%;
            background: conic-gradient(from 0deg, #4a00e0, #8e2de2, #4a00e0);
            animation: rotate 4s linear infinite;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 50px rgba(142, 45, 226, 0.8);
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .mission-card {
            background-color: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin: 15px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .mission-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .btn-primary {
            background-color: #8e2de2;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(142, 45, 226, 0.2);
        }
        
        .btn-primary:hover {
            background-color: #7928ca;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(142, 45, 226, 0.3);
        }
        
        .btn-secondary {
            background-color: #f0e6d2;
            color: #4a5568;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .btn-secondary:hover {
            background-color: #e2d8c4;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .option {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .option:hover {
            border-color: #8e2de2;
            background-color: #f9f5ff;
        }
        
        .option.selected {
            border-color: #8e2de2;
            background-color: #f3e8ff;
        }
        
        .option.correct {
            border-color: #48bb78;
            background-color: #f0fff4;
        }
        
        .option.incorrect {
            border-color: #f56565;
            background-color: #fff5f5;
        }
        
        .history-scene {
            position: relative;
            height: 250px;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .badge {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto;
            animation: badge-glow 2s infinite alternate;
        }
        
        @keyframes badge-glow {
            from { filter: drop-shadow(0 0 5px rgba(142, 45, 226, 0.5)); }
            to { filter: drop-shadow(0 0 15px rgba(142, 45, 226, 0.8)); }
        }
        
        .repair-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
        }
        
        .repair-animation.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .repair-flash {
            width: 100px;
            height: 100px;
            background-color: white;
            border-radius: 50%;
            animation: flash 2s forwards;
        }
        
        @keyframes flash {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(15); opacity: 1; }
            100% { transform: scale(30); opacity: 0; }
        }
        
        .drawer-handle {
            width: 60px;
            height: 10px;
            background-color: #8B4513;
            border-radius: 5px;
            margin: 0 auto;
        }
        
        .achievement {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #8e2de2;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 40;
            transition: bottom 0.5s;
        }
        
        .achievement.show {
            bottom: 20px;
        }
        
        /* Scene-specific styles */
        .scene-edison {
            background: linear-gradient(to bottom, #1a202c 60%, #2d3748 100%);
        }
        
        .scene-qin {
            background: linear-gradient(to bottom, #f6e05e 0%, #dd6b20 100%);
        }
        
        .scene-wright {
            background: linear-gradient(to bottom, #90cdf4 0%, #2b6cb0 100%);
        }
        
        .scene-newton {
            background: linear-gradient(to bottom, #c6f6d5 0%, #38a169 100%);
        }
        
        .scene-tesla {
            background: linear-gradient(to bottom, #a3bffa 0%, #4c51bf 100%);
        }
        
        .scene-paper {
            background: linear-gradient(to bottom, #fefcbf 0%, #d69e2e 100%);
        }
        
        .scene-columbus {
            background: linear-gradient(to bottom, #bee3f8 0%, #3182ce 100%);
        }
        
        .scene-mlk {
            background: linear-gradient(to bottom, #e9d8fd 0%, #805ad5 100%);
        }
        
        .scene-gandhi {
            background: linear-gradient(to bottom, #fed7d7 0%, #e53e3e 100%);
        }
        
        .scene-gutenberg {
            background: linear-gradient(to bottom, #e2e8f0 0%, #718096 100%);
        }
        
        .light-bulb {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 90px;
            background-color: rgba(255, 255, 190, 0.1);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow: 0 0 20px rgba(255, 255, 190, 0.1);
            transition: all 1s;
        }
        
        .light-bulb.lit {
            background-color: rgba(255, 255, 190, 0.9);
            box-shadow: 0 0 50px rgba(255, 255, 190, 0.8);
        }
        
        .candle {
            position: absolute;
            bottom: 30px;
            width: 20px;
            height: 60px;
            background-color: #f6e05e;
            border-radius: 5px 5px 0 0;
        }
        
        .candle::before {
            content: '';
            position: absolute;
            top: -15px;
            left: 7px;
            width: 6px;
            height: 15px;
            background-color: #f56565;
            border-radius: 50% 50% 20% 20%;
            box-shadow: 0 0 10px #f56565, 0 0 20px #f56565;
            animation: flicker 1s infinite alternate;
        }
        
        @keyframes flicker {
            0% { transform: scaleY(1); }
            50% { transform: scaleY(0.9); }
            100% { transform: scaleY(1.1); }
        }
        
        .character {
            position: absolute;
            bottom: 20px;
            width: 80px;
            height: 120px;
            transition: opacity 1s;
        }
        
        .edison {
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 150'%3E%3Crect x='35' y='30' width='30' height='40' rx='15' fill='%23d69e2e'/%3E%3Ccircle cx='50' cy='25' r='20' fill='%23f6e05e'/%3E%3Crect x='35' y='70' width='30' height='60' fill='%23718096'/%3E%3Crect x='25' y='70' width='10' height='40' fill='%23718096'/%3E%3Crect x='65' y='70' width='10' height='40' fill='%23718096'/%3E%3Crect x='35' y='130' width='10' height='20' fill='%23000'/%3E%3Crect x='55' y='130' width='10' height='20' fill='%23000'/%3E%3C/svg%3E") no-repeat center center;
            left: 60%;
            opacity: 0;
        }
        
        .qin-emperor {
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 150'%3E%3Crect x='30' y='50' width='40' height='60' fill='%23dd6b20'/%3E%3Cpolygon points='30,50 70,50 80,30 20,30' fill='%23f6e05e'/%3E%3Ccircle cx='50' cy='20' r='15' fill='%23f6e05e'/%3E%3Crect x='35' y='110' width='10' height='30' fill='%23000'/%3E%3Crect x='55' y='110' width='10' height='30' fill='%23000'/%3E%3C/svg%3E") no-repeat center center;
            left: 60%;
            opacity: 0;
        }
        
        .wright-brothers {
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 100'%3E%3Cline x1='10' y1='50' x2='140' y2='50' stroke='%23718096' stroke-width='5'/%3E%3Cline x1='75' y1='20' x2='75' y2='80' stroke='%23718096' stroke-width='5'/%3E%3Cpath d='M30,50 Q75,20 120,50' stroke='%23a0aec0' stroke-width='3' fill='transparent'/%3E%3Cpath d='M30,50 Q75,80 120,50' stroke='%23a0aec0' stroke-width='3' fill='transparent'/%3E%3Ccircle cx='75' cy='50' r='10' fill='%23718096'/%3E%3C/svg%3E") no-repeat center center;
            width: 150px;
            height: 100px;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
        }
        
        .newton {
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 150'%3E%3Ccircle cx='50' cy='25' r='20' fill='%23f6e05e'/%3E%3Crect x='35' y='45' width='30' height='60' fill='%23718096'/%3E%3Crect x='25' y='55' width='10' height='40' fill='%23718096'/%3E%3Crect x='65' y='55' width='10' height='40' fill='%23718096'/%3E%3Crect x='35' y='105' width='10' height='20' fill='%23000'/%3E%3Crect x='55' y='105' width='10' height='20' fill='%23000'/%3E%3Ccircle cx='50' cy='25' r='20' fill='%23f6e05e'/%3E%3Cpath d='M40,20 L45,30 L55,30 L60,20' fill='none' stroke='%23000' stroke-width='2'/%3E%3C/svg%3E") no-repeat center center;
            left: 60%;
            opacity: 0;
        }
        
        .tesla {
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 150'%3E%3Ccircle cx='50' cy='25' r='20' fill='%23f6e05e'/%3E%3Crect x='35' y='45' width='30' height='60' fill='%234c51bf'/%3E%3Crect x='25' y='55' width='10' height='40' fill='%234c51bf'/%3E%3Crect x='65' y='55' width='10' height='40' fill='%234c51bf'/%3E%3Crect x='35' y='105' width='10' height='20' fill='%23000'/%3E%3Crect x='55' y='105' width='10' height='20' fill='%23000'/%3E%3Cpath d='M35,25 L65,25' stroke='%23000' stroke-width='2'/%3E%3Cpath d='M40,20 L45,30 L55,30 L60,20' fill='none' stroke='%23000' stroke-width='2'/%3E%3C/svg%3E") no-repeat center center;
            left: 60%;
            opacity: 0;
        }
        
        .apple {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #f56565;
            border-radius: 50%;
            top: 50px;
            left: 40%;
            opacity: 0;
            transition: all 1s;
        }
        
        .apple::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 13px;
            width: 4px;
            height: 10px;
            background-color: #68d391;
            border-radius: 2px;
        }
        
        .apple.falling {
            animation: fall 1s forwards;
            opacity: 1;
        }
        
        @keyframes fall {
            0% { transform: translateY(0); }
            100% { transform: translateY(100px); }
        }
        
        .lightning {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 10px;
            height: 0;
            background-color: #f6e05e;
            opacity: 0;
            transition: all 0.5s;
        }
        
        .lightning.active {
            height: 100%;
            opacity: 1;
            box-shadow: 0 0 20px #f6e05e;
        }
        
        .chinese-text {
            position: absolute;
            font-size: 24px;
            color: #000;
            opacity: 0;
            transition: opacity 1s;
        }
        
        .text-unified {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 36px;
            font-weight: bold;
        }
        
        .text-different {
            top: 30%;
            left: 20%;
            transform: rotate(-15deg);
        }
        
        .text-different-2 {
            top: 40%;
            left: 70%;
            transform: rotate(15deg);
        }
        
        .text-different-3 {
            top: 60%;
            left: 30%;
            transform: rotate(5deg);
        }
        
        .report-card {
            background-color: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .report-stamp {
            width: 100px;
            height: 100px;
            background-color: rgba(142, 45, 226, 0.1);
            border: 2px solid #8e2de2;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transform: rotate(-15deg);
        }
        
        /* Drawer animation enhancement */
        .desk {
            position: relative;
            width: 100%;
            max-width: 500px;
            height: 300px;
            margin: 0 auto;
        }
        
        .desk-top {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 30px;
            background-color: #8B4513;
            border-radius: 5px 5px 0 0;
        }
        
        .desk-body {
            position: absolute;
            top: 30px;
            left: 0;
            width: 100%;
            height: 200px;
            background-color: #A0522D;
        }
        
        .drawer-container {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 120px;
            background-color: #8B4513;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .drawer-front {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #CD853F;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        
        .drawer-front:hover {
            transform: translateY(5px);
        }
        
        .drawer-knob {
            width: 20px;
            height: 20px;
            background-color: #8B4513;
            border-radius: 50%;
            margin-top: 10px;
        }
        
        .drawer-inside {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #5D4037;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .time-machine-container {
            position: relative;
            width: 80px;
            height: 80px;
            opacity: 0;
            transform: scale(0.5);
            transition: all 1s ease;
        }
        
        .time-machine-container.visible {
            opacity: 1;
            transform: scale(1);
        }
        
        .time-machine-glow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(142, 45, 226, 0.6) 0%, rgba(142, 45, 226, 0) 70%);
            animation: glow 2s infinite alternate;
        }
        
        @keyframes glow {
            from { opacity: 0.5; transform: scale(1); }
            to { opacity: 1; transform: scale(1.2); }
        }
        
        .desk-leg-left {
            position: absolute;
            bottom: 0;
            left: 10%;
            width: 20px;
            height: 70px;
            background-color: #8B4513;
        }
        
        .desk-leg-right {
            position: absolute;
            bottom: 0;
            right: 10%;
            width: 20px;
            height: 70px;
            background-color: #8B4513;
        }
        
        .creator-info {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }
        
        .creator-info a {
            color: #8e2de2;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .creator-info a:hover {
            color: #7928ca;
            text-decoration: underline;
        }
        
        .scene-emoji {
            font-size: 80px;
            opacity: 0;
            transition: all 1s;
        }
        
        .scene-emoji.visible {
            opacity: 1;
            animation: bounce 1s;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-30px);}
            60% {transform: translateY(-15px);}
        }
        
        .ship {
            position: absolute;
            width: 120px;
            height: 80px;
            bottom: 40px;
            left: -150px;
            opacity: 0;
            transition: all 2s;
        }
        
        .ship.sailing {
            left: 120%;
            opacity: 1;
        }
        
        .paper-scroll {
            position: absolute;
            width: 100px;
            height: 120px;
            background-color: #f8fafc;
            border-radius: 5px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            transition: all 1s;
        }
        
        .paper-scroll.visible {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }
        
        .paper-scroll::before,
        .paper-scroll::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 10px;
            background-color: #e2e8f0;
            left: 0;
        }
        
        .paper-scroll::before {
            top: 0;
            border-radius: 5px 5px 0 0;
        }
        
        .paper-scroll::after {
            bottom: 0;
            border-radius: 0 0 5px 5px;
        }
        
        .printing-press {
            position: absolute;
            width: 140px;
            height: 100px;
            background-color: #4a5568;
            border-radius: 5px;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 1s;
        }
        
        .printing-press.visible {
            opacity: 1;
        }
        
        .printing-press::before {
            content: '';
            position: absolute;
            width: 100px;
            height: 5px;
            background-color: #2d3748;
            top: 30px;
            left: 20px;
            animation: press 2s infinite alternate;
        }
        
        @keyframes press {
            from { transform: translateY(0); }
            to { transform: translateY(20px); }
        }
        
        .printed-page {
            position: absolute;
            width: 60px;
            height: 80px;
            background-color: #fff;
            top: 60px;
            left: 40px;
            opacity: 0;
            transition: opacity 1s;
        }
        
        .printed-page.visible {
            opacity: 1;
        }
        
        .speech-bubble {
            position: absolute;
            width: 120px;
            height: 80px;
            background-color: #fff;
            border-radius: 20px;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 1s;
        }
        
        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 15px 15px 0;
            border-style: solid;
            border-color: #fff transparent;
        }
        
        .speech-bubble.visible {
            opacity: 1;
        }
        
        .flag {
            position: absolute;
            width: 60px;
            height: 40px;
            background-color: #ed8936;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 1s;
        }
        
        .flag::before {
            content: '';
            position: absolute;
            width: 5px;
            height: 100px;
            background-color: #718096;
            left: -5px;
            top: 0;
        }
        
        .flag.visible {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="app" class="min-h-screen">
        <!-- Home Screen -->
        <div id="home-screen" class="min-h-screen flex flex-col items-center justify-center p-4">
            <h1 class="text-4xl font-bold text-center mb-6">LSTÈÅäÊà≤ÂÆ§-üï∞Ô∏è „ÄäÊäΩÂ±úÂºèÊôÇÂÖâÊ©ü„ÄãÊ≠∑Âè≤ÁØ°ÊîπË™øÊü•Â±Ä</h1>
            <p class="text-xl text-center max-w-lg mb-8">‰Ω†ÁôºÁèæÊõ∏Ê°åÊäΩÂ±úË£°ËóèËëó‰∏ÄÂè∞Á•ûÁ•ïÊôÇÂÖâÊ©ü„ÄÇÊúâ‰∫∫Á©øË∂äÊôÇÈñìÔºåÊääÊ≠∑Âè≤ÊÇÑÊÇÑÊîπÂØ´‰∫ÜÔºÅ‰Ω†Ë¢´ÂæµÂè¨ÈÄ≤ÂÖ•„ÄåÊ≠∑Âè≤ÁØ°ÊîπË™øÊü•Â±Ä„ÄçÔºåË¶ÅÂâçÂæÄ‰∏çÂêåÂπ¥‰ª£ÔºåÊü•Âá∫ÈåØË™§‰∏¶‰øÆÂæ©Ê≠∑Âè≤ÔºÅ</p>
            
            <!-- Enhanced desk with drawer -->
            <div class="desk mb-8">
                <div class="desk-top"></div>
                <div class="desk-body"></div>
                <div class="drawer-container">
                    <div class="drawer-inside">
                        <div class="time-machine-container" id="time-machine-container">
                            <div class="time-machine-glow"></div>
                            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="50" cy="50" r="45" fill="#8e2de2" />
                                <circle cx="50" cy="50" r="35" fill="#4a00e0" />
                                <circle cx="50" cy="50" r="25" fill="#3c0ca4" />
                                <path d="M50,15 L50,50 L75,50" stroke="white" stroke-width="3" fill="none" />
                                <circle cx="50" cy="50" r="5" fill="white" />
                            </svg>
                        </div>
                    </div>
                    <div class="drawer-front" id="drawer-front">
                        <p class="text-white text-center">ÈªûÊìäÊäΩÂ±úÔºåÂïüÂãïÊôÇÂÖâÊ©ü</p>
                        <div class="drawer-knob"></div>
                    </div>
                </div>
                <div class="desk-leg-left"></div>
                <div class="desk-leg-right"></div>
            </div>
            
            <button id="start-btn" class="btn-primary hidden">ÂïüÂãïÊôÇÂÖâÊ©ü</button>
            
            <!-- Creator information -->
            <div class="creator-info mt-auto">
                <p>ÈÅäÊà≤Ë®≠Ë®àËàáË£Ω‰ΩúÔºöÂëÇËàíÂ©∑ÔΩú<a href="https://www.facebook.com/search/top?q=ÂëÇËàíÂ©∑" target="_blank">‰∫ÜËß£Êõ¥Â§öüîç</a></p>
                <p>ËáâÊõ∏ÊêúÂ∞ãÔºöÂëÇËàíÂ©∑ÔΩúüìß <a href="mailto:luuyobi@gmail.com">luuyobi@gmail.com</a></p>
            </div>
        </div>
        
        <!-- Time Portal Animation -->
        <div id="time-portal" class="time-portal">
            <div class="portal-inner">
                <div class="text-white text-3xl font-bold">ÊôÇÁ©∫Á©øÊ¢≠‰∏≠...</div>
            </div>
        </div>
        
        <!-- Mission Selection Screen -->
        <div id="mission-select" class="min-h-screen py-8 px-4 hidden">
            <div class="max-w-6xl mx-auto">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-3xl font-bold">LSTÈÅäÊà≤ÂÆ§-üï∞Ô∏è „ÄäÊäΩÂ±úÂºèÊôÇÂÖâÊ©ü„ÄãÊ≠∑Âè≤ÁØ°ÊîπË™øÊü•Â±Ä</h1>
                    <div class="flex items-center">
                        <span class="mr-2">Â∑≤ÂÆåÊàê‰ªªÂãô:</span>
                        <span id="missions-completed" class="font-bold text-xl">0</span>
                        <span class="mx-1">/</span>
                        <span id="total-missions" class="font-bold text-xl">10</span>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Mission cards will be generated here -->
                </div>
            </div>
        </div>
        
        <!-- Mission Screen -->
        <div id="mission-screen" class="min-h-screen py-8 px-4 hidden">
            <div class="max-w-3xl mx-auto">
                <div class="flex justify-between items-center mb-6">
                    <button id="back-to-missions" class="btn-secondary">ËøîÂõû‰ªªÂãôÂàóË°®</button>
                    <h2 id="mission-title" class="text-2xl font-bold">‰ªªÂãôÊ®ôÈ°å</h2>
                    <div class="w-32"></div> <!-- Spacer for alignment -->
                </div>
                
                <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                    <h3 class="text-xl font-bold mb-4">ÊôÇ‰ª£ËÉåÊôØ</h3>
                    <p id="mission-background" class="text-lg mb-6">ÊôÇ‰ª£ËÉåÊôØÊèèËø∞...</p>
                    
                    <div id="history-scene" class="history-scene mb-6">
                        <!-- Scene elements will be added dynamically -->
                    </div>
                    
                    <div class="border-t border-gray-200 pt-6">
                        <h3 class="text-xl font-bold mb-4">ÁØ°ÊîπÂæåÁöÑÊ≠∑Âè≤</h3>
                        <p id="altered-history" class="text-lg mb-6">ÁØ°ÊîπÂæåÁöÑÊ≠∑Âè≤ÊèèËø∞...</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                    <h3 class="text-xl font-bold mb-4">üîç Ë™øÊü•‰ªªÂãô</h3>
                    <p class="mb-6">Ë´ãÊâæÂá∫Ê≠∑Âè≤‰∏≠ÁöÑÈåØË™§Ôºå‰∏¶ÈÅ∏ÊìáÊ≠£Á¢∫ÁöÑÁ≠îÊ°àÔºö</p>
                    
                    <div id="question-container" class="mb-6">
                        <p id="question" class="text-lg font-medium mb-4">ÂïèÈ°åÂ∞áÈ°ØÁ§∫Âú®ÈÄôË£°...</p>
                        
                        <div id="options-container">
                            <!-- Options will be generated here -->
                        </div>
                    </div>
                    
                    <button id="check-answer" class="btn-primary w-full">Á¢∫Ë™çÁ≠îÊ°à</button>
                </div>
                
                <div id="result-container" class="bg-white rounded-xl shadow-lg p-6 mb-8 hidden">
                    <h3 id="result-title" class="text-xl font-bold mb-4">ÁµêÊûú</h3>
                    <p id="result-message" class="text-lg mb-6">ÁµêÊûúË®äÊÅØ...</p>
                    <button id="continue-btn" class="btn-primary w-full">ÁπºÁ∫å</button>
                </div>
            </div>
        </div>
        
        <!-- Report Screen -->
        <div id="report-screen" class="min-h-screen py-8 px-4 hidden">
            <div class="max-w-3xl mx-auto">
                <div class="flex justify-between items-center mb-6">
                    <button id="back-to-missions-from-report" class="btn-secondary">ËøîÂõû‰ªªÂãôÂàóË°®</button>
                    <h2 class="text-2xl font-bold">‰ªªÂãôÂ†±ÂëäÊõ∏</h2>
                    <div class="w-32"></div> <!-- Spacer for alignment -->
                </div>
                
                <div class="report-card" id="report-content">
                    <div class="report-header">
                        <div>
                            <h3 id="report-mission-title" class="text-xl font-bold">‰ªªÂãôÊ®ôÈ°å</h3>
                            <p id="report-date" class="text-gray-600">Êó•Êúü: 2023Âπ¥10Êúà15Êó•</p>
                        </div>
                        <div class="report-stamp">
                            <span class="text-purple-700 font-bold transform rotate-15">Â∑≤‰øÆÂæ©</span>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h4 class="font-bold mb-2">ÁØ°ÊîπÁöÑÊ≠∑Âè≤Ôºö</h4>
                        <p id="report-altered" class="p-3 bg-red-100 rounded-lg">ÁØ°ÊîπÂæåÁöÑÊ≠∑Âè≤ÊèèËø∞...</p>
                    </div>
                    
                    <div class="mb-6">
                        <h4 class="font-bold mb-2">Ê≠£Á¢∫ÁöÑÊ≠∑Âè≤Ôºö</h4>
                        <p id="report-correct" class="p-3 bg-green-100 rounded-lg">Ê≠£Á¢∫ÁöÑÊ≠∑Âè≤ÊèèËø∞...</p>
                    </div>
                    
                    <div class="mb-6">
                        <h4 class="font-bold mb-2">Ê≠∑Âè≤Áü•Ë≠òË¶ÅÈªûÔºö</h4>
                        <ul id="report-key-points" class="list-disc pl-5">
                            <li>Áü•Ë≠òÈªû 1</li>
                            <li>Áü•Ë≠òÈªû 2</li>
                        </ul>
                    </div>
                    
                    <button id="download-pdf" class="btn-primary">‰∏ãËºâÂ≠∏ÁøíÂñÆ PDF</button>
                </div>
            </div>
        </div>
        
        <!-- Achievement Badge Screen -->
        <div id="badge-screen" class="min-h-screen py-8 px-4 hidden flex flex-col items-center justify-center">
            <div class="badge mb-8">
                <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="100" cy="100" r="90" fill="#8e2de2" />
                    <circle cx="100" cy="100" r="80" fill="#f0e6d2" />
                    <circle cx="100" cy="100" r="70" fill="#8e2de2" />
                    <path d="M100,40 L115,85 L165,85 L125,115 L140,160 L100,130 L60,160 L75,115 L35,85 L85,85 Z" fill="#f0e6d2" />
                    <circle cx="100" cy="100" r="20" fill="#f0e6d2" />
                </svg>
            </div>
            
            <h2 class="text-3xl font-bold mb-4">ÊÅ≠ÂñúÁç≤ÂæóÊàêÂ∞±ÔºÅ</h2>
            <p class="text-xl mb-8">„ÄåÊ≠∑Âè≤‰øÆÊ≠£ÂÆò„ÄçÂæΩÁ´†</p>
            <p class="text-center max-w-md mb-8">‰Ω†Â∑≤ÊàêÂäüÂÆåÊàê5ÂÄã‰ªªÂãôÔºåÊàêÁÇ∫Ê≠∑Âè≤ÁØ°ÊîπË™øÊü•Â±ÄÁöÑÂÑ™ÁßÄË™øÊü•Âì°ÔºÅÁπºÁ∫åÂä™ÂäõÔºå‰øÆÂæ©Êõ¥Â§öË¢´ÁØ°ÊîπÁöÑÊ≠∑Âè≤ÔºÅ</p>
            
            <button id="continue-from-badge" class="btn-primary">ÁπºÁ∫å‰ªªÂãô</button>
        </div>
        
        <!-- Repair Animation -->
        <div id="repair-animation" class="repair-animation">
            <div class="repair-flash"></div>
        </div>
        
        <!-- Achievement Notification -->
        <div id="achievement" class="achievement">
            <div class="flex items-center">
                <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                <span id="achievement-text">ÊàêÂ∞±Ëß£ÈéñÔºöÊ≠∑Âè≤‰øÆÊ≠£ÂÆòÂæΩÁ´†ÔºÅ</span>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Game state
            const gameState = {
                missionsCompleted: 0,
                currentMission: null,
                selectedOption: null,
                missions: [
                    {
                        id: 1,
                        title: "ÊÑõËø™ÁîüËàáÁáàÊ≥°‰πãË¨é",
                        background: "19‰∏ñÁ¥ÄÊú´ÔºåÁßëÊäÄÁôºÂ±ïËøÖÈÄüÔºå‰∫∫ÂÄëÁöÑÁîüÊ¥ªÊñπÂºèÊ≠£Âú®ÊîπËÆä„ÄÇ",
                        alteredHistory: "1879 Âπ¥ÔºåÁæéÂúãÊôö‰∏äÈÇÑÊòØÈªûË†üÁá≠ÁÖßÊòé‚Ä¶‚Ä¶ Âõ†ÁÇ∫Ê≤íÊúâ‰∫∫ÁôºÊòéÁáàÊ≥°ÔºÅ",
                        correctHistory: "1879Âπ¥ÔºåÊÑõËø™ÁîüÔºàThomas Alva EdisonÔºâÊàêÂäüÊîπËâØ‰∫ÜÁôΩÁÜæÁáàÊ≥°ÔºåÁÇ∫‰∫∫È°ûÁÖßÊòéÊäÄË°ìÂ∏∂‰æÜÈù©ÂëΩÊÄßÁöÑÈÄ≤Ê≠•„ÄÇ",
                        question: "‰ª•‰∏ãË™∞ÊòØÁôºÊòéÈõªÁáàÁöÑÈóúÈçµ‰∫∫Áâ©Ôºü",
                        options: [
                            "È¶¨‰∏ÅË∑ØÂæ∑ÈáëÔºàMartin Luther King Jr.Ôºâ",
                            "ÊÑõËø™ÁîüÔºàThomas Alva EdisonÔºâ",
                            "Âì•ÂÄ´Â∏ÉÔºàChristopher ColumbusÔºâ"
                        ],
                        correctIndex: 1,
                        keyPoints: [
                            "ÊÑõËø™ÁîüÔºàThomas Alva EdisonÔºâÂú®1879Âπ¥ÊàêÂäüÊîπËâØ‰∫ÜÁôΩÁÜæÁáàÊ≥°Ôºå‰ΩøÂÖ∂ËÉΩÂ§†ÊåÅÁ∫åÁôºÂÖâÊõ¥Èï∑ÊôÇÈñì",
                            "ÈõñÁÑ∂ÊÑõËø™Áîü‰∏çÊòØÁ¨¨‰∏ÄÂÄãÁôºÊòéÁáàÊ≥°ÁöÑ‰∫∫Ôºå‰ΩÜ‰ªñÁöÑÊîπËâØ‰ΩøÁáàÊ≥°ÊàêÁÇ∫ÂØ¶Áî®ÁöÑÂïÜÊ•≠Áî¢ÂìÅ",
                            "ÈõªÁáàÁöÑÁôºÊòéÂæπÂ∫ïÊîπËÆä‰∫Ü‰∫∫È°ûÁöÑÁîüÊ¥ªÊñπÂºèÔºåÂª∂Èï∑‰∫Ü‰∫∫ÂÄëÁöÑÊ¥ªÂãïÊôÇÈñì"
                        ],
                        sceneType: "edison",
                        emoji: "üí°",
                        completed: false
                    },
                    {
                        id: 2,
                        title: "Áß¶ÂßãÁöáÁöÑÊñáÂ≠óÁµ±‰∏Ä",
                        background: "ÂÖ¨ÂÖÉÂâç221Âπ¥ÔºåÁß¶ÂßãÁöáÁµ±‰∏Ä‰∫Ü‰∏≠ÂúãÔºåÂª∫Á´ã‰∫Ü‰∏≠ÂúãÊ≠∑Âè≤‰∏äÁ¨¨‰∏ÄÂÄãÁµ±‰∏ÄÁöÑÂ§öÊ∞ëÊóèÂúãÂÆ∂„ÄÇ",
                        alteredHistory: "Áß¶ÂßãÁöáËÆìÊØèÂÄãÂú∞ÊñπÁî®‰∏çÂêåÊñáÂ≠óÔºåÂØ´‰ø°ÈÉΩÁúã‰∏çÊáÇ„ÄÇ",
                        correctHistory: "Áß¶ÂßãÁöáÔºàQin Shi HuangÔºâÁµ±‰∏Ä‰∫ÜÊñáÂ≠ó„ÄÅË≤®Âπ£ËàáÂ∫¶ÈáèË°°Ôºå‰øÉÈÄ≤‰∫ÜÂÖ®ÂúãÁöÑ‰∫§ÊµÅËàáÁôºÂ±ï„ÄÇ",
                        question: "Áß¶ÂßãÁöáÂú®Áµ±‰∏Ä‰∏≠ÂúãÂæåÂÅö‰∫Ü‰ªÄÈ∫ºÈáçË¶ÅÁöÑÊîπÈù©Ôºü",
                        options: [
                            "ËÆìÂêÑÂú∞ÂçÄ‰ΩøÁî®‰∏çÂêåÁöÑÊñáÂ≠ó",
                            "Áµ±‰∏Ä‰∫ÜÊñáÂ≠ó„ÄÅË≤®Âπ£ËàáÂ∫¶ÈáèË°°",
                            "Á¶ÅÊ≠¢‰∫∫Ê∞ëÂ≠∏ÁøíÂØ´Â≠ó"
                        ],
                        correctIndex: 1,
                        keyPoints: [
                            "Áß¶ÂßãÁöáÔºàQin Shi HuangÔºâÁµ±‰∏Ä‰∫ÜÊñáÂ≠óÔºåÊé°Áî®Â∞èÁØÜ‰ΩúÁÇ∫Ê®ôÊ∫ñÊñáÂ≠ó",
                            "Áµ±‰∏ÄË≤®Âπ£„ÄÅÂ∫¶ÈáèË°°ÊúâÂä©Êñº‰øÉÈÄ≤ÂÖ®ÂúãÁ∂ìÊøüÂíåÊñáÂåñ‰∫§ÊµÅ",
                            "ÈÄô‰∫õÁµ±‰∏ÄÊé™ÊñΩÂ∞ç‰∏≠ÂúãÊ≠∑Âè≤ÁôºÂ±ïÁî¢Áîü‰∫ÜÊ∑±ÈÅ†ÂΩ±Èüø"
                        ],
                        sceneType: "qin",
                        emoji: "üìú",
                        completed: false
                    },
                    {
                        id: 3,
                        title: "ËêäÁâπÂÖÑÂºüÁöÑÈ£õË°åÂ§¢",
                        background: "20‰∏ñÁ¥ÄÂàùÔºå‰∫∫È°û‰∏ÄÁõ¥Â§¢ÊÉ≥ËëóËÉΩÂÉèÈ≥•ÂÖí‰∏ÄÊ®£Âú®Â§©Á©∫‰∏≠È£õÁøî„ÄÇ",
                        alteredHistory: "ËêäÁâπÂÖÑÂºüÁôºÊòéÁöÑÊòØÊΩõÊ∞¥ËâáÔºåËÄå‰∏çÊòØÈ£õÊ©ü„ÄÇ",
                        correctHistory: "1903Âπ¥ÔºåËêäÁâπÂÖÑÂºüÔºàWright Brothers, Orville and WilburÔºâÊàêÂäüË©¶È£õ‰∫ÜÁ¨¨‰∏ÄÊû∂ÂãïÂäõÈ£õÊ©üÔºåÂØ¶Áèæ‰∫Ü‰∫∫È°ûÈ£õË°åÁöÑÂ§¢ÊÉ≥„ÄÇ",
                        question: "ËêäÁâπÂÖÑÂºüÂú®1903Âπ¥ÊàêÂäüÁôºÊòé‰∫Ü‰ªÄÈ∫ºÔºü",
                        options: [
                            "ÊΩõÊ∞¥Ëâá",
                            "ÂãïÂäõÈ£õÊ©ü",
                            "Ëí∏Ê±ΩÁÅ´Ëªä"
                        ],
                        correctIndex: 1,
                        keyPoints: [
                            "ËêäÁâπÂÖÑÂºüÔºàOrville and Wilbur WrightÔºâÊñº1903Âπ¥12Êúà17Êó•Âú®ÂåóÂç°ÁæÖ‰æÜÁ¥çÂ∑ûÊàêÂäüË©¶È£õÁ¨¨‰∏ÄÊû∂ÂãïÂäõÈ£õÊ©ü",
                            "‰ªñÂÄëÁöÑÈ£õÊ©ü„ÄåÈ£õË°åËÄÖ‰∏ÄËôü„ÄçÈ¶ñÊ¨°È£õË°åÊåÅÁ∫å‰∫Ü12ÁßíÔºåÈ£õË°åË∑ùÈõ¢36Á±≥",
                            "ÈÄôÊ¨°È£õË°åÈñãÂâµ‰∫Ü‰∫∫È°ûËà™Á©∫ÊôÇ‰ª£"
                        ],
                        sceneType: "wright",
                        emoji: "‚úàÔ∏è",
                        completed: false
                    },
                    {
                        id: 4,
                        title: "ÁâõÈ†ìËàáËê¨ÊúâÂºïÂäõ",
                        background: "17‰∏ñÁ¥ÄÔºåÁßëÂ≠∏Èù©ÂëΩÊ≠£Âú®Ê≠êÊ¥≤Ëì¨ÂãÉÁôºÂ±ïÔºå‰∫∫ÂÄëÈñãÂßãÁî®ÁßëÂ≠∏ÊñπÊ≥ïÁêÜËß£‰∏ñÁïå„ÄÇ",
                        alteredHistory: "ÁâõÈ†ìÁôºÊòé‰∫ÜÂ∑ßÂÖãÂäõÔºåËÄå‰∏çÊòØÁôºÁèæËê¨ÊúâÂºïÂäõ„ÄÇ",
                        correctHistory: "ÁâõÈ†ìÔºàIsaac NewtonÔºâÁôºÁèæ‰∫ÜËê¨ÊúâÂºïÂäõÂÆöÂæãÔºå‰∏¶ÊèêÂá∫‰∫Ü‰∏âÂ§ßÈÅãÂãïÂÆöÂæãÔºåÁÇ∫Áèæ‰ª£Áâ©ÁêÜÂ≠∏Â•†ÂÆö‰∫ÜÂü∫Á§é„ÄÇ",
                        question: "ÁâõÈ†ìÊúÄËëóÂêçÁöÑÁôºÁèæÊòØ‰ªÄÈ∫ºÔºü",
                        options: [
                            "Â∑ßÂÖãÂäõË£Ω‰ΩúÊñπÊ≥ï",
                            "Ëê¨ÊúâÂºïÂäõËàá‰∏âÂ§ßÈÅãÂãïÂÆöÂæã",
                            "ÈõªÁáàÊ≥°"
                        ],
                        correctIndex: 1,
                        keyPoints: [
                            "ÁâõÈ†ìÔºàIsaac NewtonÔºâÂú®1687Âπ¥ÁôºË°®ÁöÑ„ÄäËá™ÁÑ∂Âì≤Â≠∏ÁöÑÊï∏Â≠∏ÂéüÁêÜ„Äã‰∏≠ÊèêÂá∫‰∫ÜËê¨ÊúâÂºïÂäõÂÆöÂæã",
                            "ÂÇ≥Ë™™ÁâõÈ†ìÊòØÁúãÂà∞ËòãÊûúËêΩÂú∞ËÄåÂèóÂà∞ÂïüÁôºÔºåÊÄùËÄÉÁÇ∫‰ΩïÁâ©È´îÁ∏ΩÊòØÂêë‰∏ãËêΩ",
                            "ÁâõÈ†ìÁöÑ‰∏âÂ§ßÈÅãÂãïÂÆöÂæãÁÇ∫Á∂ìÂÖ∏ÂäõÂ≠∏Â•†ÂÆö‰∫ÜÂü∫Á§é"
                        ],
                        sceneType: "newton",
                        emoji: "üçé",
                        completed: false
                    },
                    {
                        id: 5,
                        title: "ÁâπÊñØÊãâËàáÈõªÂäõÈù©ÂëΩ",
                        background: "19‰∏ñÁ¥ÄÊú´Ëá≥20‰∏ñÁ¥ÄÂàùÔºåÈõªÂäõÊäÄË°ìÊ≠£Âú®ËøÖÈÄüÁôºÂ±ïÔºåÊîπËÆäËëó‰∫∫È°ûÁöÑÁîüÊ¥ªÊñπÂºè„ÄÇ",
                        alteredHistory: "ÁâπÊñØÊãâÊòØÊÑõÂî±Ê≠åÁöÑËóùË°ìÂÆ∂ÔºåËÄå‰∏çÊòØÁßëÂ≠∏ÂÆ∂„ÄÇ",
                        correctHistory: "ÁâπÊñØÊãâÔºàNikola TeslaÔºâÊòØÁôºÊòé‰∫§ÊµÅÈõªËàáÁÑ°Á∑öÈõªÊäÄË°ìÁöÑÁßëÂ≠∏ÂÆ∂Ôºå‰ªñÁöÑÁôºÊòéÁÇ∫Áèæ‰ª£ÈõªÂäõÁ≥ªÁµ±Â•†ÂÆö‰∫ÜÂü∫Á§é„ÄÇ",
                        question: "ÁâπÊñØÊãâÁöÑ‰∏ªË¶ÅË≤¢ÁçªÊòØ‰ªÄÈ∫ºÔºü",
                        options: [
                            "Ââµ‰Ωú‰∫ÜË®±Â§öËëóÂêçÊ≠åÊõ≤",
                            "ÁôºÊòé‰∫§ÊµÅÈõªËàáÁÑ°Á∑öÈõªÊäÄË°ì",
                            "ÁôºÊòé‰∫ÜÁ¨¨‰∏ÄÂè∞ÈõªËÖ¶"
                        ],
                        correctIndex: 1,
                        keyPoints: [
                            "Â∞ºÂè§Êãâ¬∑ÁâπÊñØÊãâÔºàNikola TeslaÔºâÁôºÊòé‰∫Ü‰∫§ÊµÅÈõªÁ≥ªÁµ±ÔºåÈÄôÊòØÁèæ‰ª£ÈõªÂäõÂÇ≥Ëº∏ÁöÑÂü∫Á§é",
                            "‰ªñÂú®ÁÑ°Á∑öÈõªÊäÄË°ìÊñπÈù¢‰πüÊúâÈáçË¶ÅË≤¢ÁçªÔºåÁÇ∫ÁÑ°Á∑öÈÄö‰ø°Â•†ÂÆö‰∫ÜÂü∫Á§é",
                            "ÁâπÊñØÊãâËàáÊÑõËø™ÁîüÊõæÊúâËëóÂêçÁöÑ„ÄåÈõªÊµÅ‰πãÊà∞„ÄçÔºåÁà≠Ë´ñÁõ¥ÊµÅÈõªËàá‰∫§ÊµÅÈõªÁöÑÂÑ™Âä£"
                        ],
                        sceneType: "tesla",
                        emoji: "‚ö°",
                        completed: false
                    },
                    {
                        id: 6,
                        title: "Ëî°ÂÄ´ËàáÈÄ†Á¥ôË°ì",
                        background: "Êù±Êº¢ÊôÇÊúüÔºåÊñáÂ≠óË®òÈåÑ‰∏ªË¶Å‰æùÈù†Á´πÁ∞°ÂíåÁµπÂ∏õÔºåÊó¢ÊòÇË≤¥Âèà‰∏ç‰æøÊñºÊîúÂ∏∂„ÄÇ",
                        alteredHistory: "Ëî°ÂÄ´ÊääÁ¥ôÁî®ÁéâÁü≥ÂÅöÊàêÔºåÂè™ÊúâÁöáÂ∏ùËÉΩÂØ´„ÄÇ",
                        correctHistory: "Ëî°ÂÄ´ÔºàCai LunÔºâÊîπÈÄ≤ÈÄ†Á¥ôË°ìÔºå‰ΩøÁî®Ê®πÁöÆ„ÄÅÈ∫ªÈ†≠„ÄÅÁ†¥Â∏ÉÁ≠âÊùêÊñôË£Ω‰Ωú‰æøÂÆúÁöÑÁ¥ôÂºµÔºåÊé®Âª£Áµ¶Êõ¥Â§ö‰∫∫‰ΩøÁî®„ÄÇ",
                        question: "Ëî°ÂÄ´Â∞çÈÄ†Á¥ôË°ìÁöÑË≤¢ÁçªÊòØ‰ªÄÈ∫ºÔºü",
                        options: [
                            "Áî®ÁéâÁü≥Ë£Ω‰ΩúÊòÇË≤¥ÁöÑÁ¥ôÂºµ",
                            "ÊîπÈÄ≤ÈÄ†Á¥ôË°ìÔºå‰ΩøÁ¥ôÂºµÊõ¥‰æøÂÆú‰∏îÊôÆÂèä",
                            "Á¶ÅÊ≠¢Âπ≥Ê∞ë‰ΩøÁî®Á¥ôÂºµ"
                        ],
                        correctIndex: 1,
                        keyPoints: [
                            "Ëî°ÂÄ´ÔºàCai LunÔºâÂú®ÂÖ¨ÂÖÉ105Âπ¥ÊîπÈÄ≤‰∫ÜÈÄ†Á¥ôË°ìÔºå‰ΩøÁî®ÂªâÂÉπÊùêÊñôË£Ω‰ΩúÁ¥ôÂºµ",
                            "ÈÄ†Á¥ôË°ìÁöÑÊîπÈÄ≤Â§ßÂ§ßÈôç‰Ωé‰∫ÜÊõ∏ÂØ´ÊùêÊñôÁöÑÊàêÊú¨Ôºå‰øÉÈÄ≤‰∫ÜÁü•Ë≠òÂÇ≥Êí≠",
                            "ÈÄ†Á¥ôË°ìÊòØ‰∏≠ÂúãÂõõÂ§ßÁôºÊòé‰πã‰∏ÄÔºåÂæå‰æÜÂÇ≥Êí≠Âà∞‰∏ñÁïåÂêÑÂú∞"
                        ],
                        sceneType: "paper",
                        emoji: "üìÉ",
                        completed: false
                    },
                    {
                        id: 7,
                        title: "Âì•ÂÄ´Â∏ÉÁöÑËà™Êµ∑Êé¢Èö™",
                        background: "15‰∏ñÁ¥ÄÊú´ÔºåÊ≠êÊ¥≤‰∫∫Ê≠£Â∞ãÊâæÂâçÂæÄ‰∫ûÊ¥≤ÁöÑÊñ∞Ëà™Á∑öÔºå‰ª•Áç≤ÂèñÈ¶ôÊñôÂíåÁµ≤Á∂¢Á≠âË≤øÊòìÂìÅ„ÄÇ",
                        alteredHistory: "Âì•ÂÄ´Â∏ÉÊòØÂ§™Á©∫‰∫∫Ôºå‰πòÂùêÁÅ´ÁÆ≠ÂâçÂæÄÊúàÁêÉ„ÄÇ",
                        correctHistory: "Âì•ÂÄ´Â∏ÉÔºàChristopher ColumbusÔºâÊñº1492Âπ¥ÁéáÈ†ò‰∏âËâòËàπÊ©´Ê∏°Â§ßË•øÊ¥ãÔºåÊÑèÂ§ñÁôºÁèæ‰∫ÜÁæéÊ¥≤Â§ßÈô∏„ÄÇ",
                        question: "Âì•ÂÄ´Â∏ÉÂú®1492Âπ¥ÂÅö‰∫Ü‰ªÄÈ∫ºÈáçË¶ÅÁöÑ‰∫ãÊÉÖÔºü",
                        options: [
                            "‰πòÂùêÁÅ´ÁÆ≠ÂâçÂæÄÊúàÁêÉ",
                            "ÁôºÁèæ‰∫ÜÁæéÊ¥≤Â§ßÈô∏",
                            "ÁôºÊòé‰∫ÜÊåáÂçóÈáù"
                        ],
                        correctIndex: 1,
                        keyPoints: [
                            "Âì•ÂÄ´Â∏ÉÔºàChristopher ColumbusÔºâÂéüÊú¨Ë®àÂäÉÊâæÂà∞ÂâçÂæÄ‰∫ûÊ¥≤ÁöÑË•øÊñπËà™Á∑öÔºåÂçªÊÑèÂ§ñÁôºÁèæ‰∫ÜÁæéÊ¥≤",
                            "‰ªñÁöÑËà™Ë°åÈñãÂïü‰∫ÜÊ≠êÊ¥≤ËàáÁæéÊ¥≤‰πãÈñìÁöÑ‰∫§ÊµÅÔºå‰πüÁ®±ÁÇ∫„ÄåÂì•ÂÄ´Â∏ÉÂ§ß‰∫§Êèõ„Äç",
                            "ÈÄôÊ¨°Ëà™Ë°åÊîπËÆä‰∫Ü‰∏ñÁïåÊ≠∑Âè≤ÁöÑÈÄ≤Á®ãÔºåÈñãÂïü‰∫ÜÊ≠êÊ¥≤ÁöÑ„ÄåÂ§ßËà™Êµ∑ÊôÇ‰ª£„Äç"
                        ],
                        sceneType: "columbus",
                        emoji: "üö¢",
                        completed: false
                    },
                    {
                        id: 8,
                        title: "È¶¨‰∏ÅË∑ØÂæ∑ÈáëÁöÑÂ§¢ÊÉ≥",
                        background: "20‰∏ñÁ¥Ä‰∏≠ÊúüÔºåÁæéÂúãÁöÑÁ®ÆÊóèÈöîÈõ¢ÊîøÁ≠ñÂ∞éËá¥ÈùûË£îÁæéÂúã‰∫∫Èù¢Ëá®Âö¥ÈáçÁöÑÊ≠ßË¶ñÂíå‰∏çÂπ≥Á≠â„ÄÇ",
                        alteredHistory: "È¶¨‰∏ÅË∑ØÂæ∑ÈáëÂõ†ÊâìÁ±ÉÁêÉÂá∫ÂêçÔºåËÄå‰∏çÊòØÊ∞ëÊ¨äÈÅãÂãï„ÄÇ",
                        correctHistory: "È¶¨‰∏ÅË∑ØÂæ∑ÈáëÔºàMartin Luther King Jr.ÔºâÊòØÁæéÂúãÊ∞ëÊ¨äÈÅãÂãïÈ†òË¢ñÔºåÁôºË°®‰∫ÜËëóÂêçÁöÑ„ÄäÊàëÊúâ‰∏ÄÂÄãÂ§¢ÊÉ≥„ÄãÊºîË™™ÔºåÁà≠ÂèñÁ®ÆÊóèÂπ≥Á≠â„ÄÇ",
                        question: "È¶¨‰∏ÅË∑ØÂæ∑ÈáëÊúÄËëóÂêçÁöÑË≤¢ÁçªÊòØ‰ªÄÈ∫ºÔºü",
                        options: [
                            "ÊàêÁÇ∫NBAÁ±ÉÁêÉÊòéÊòü",
                            "È†òÂ∞éÁæéÂúãÊ∞ëÊ¨äÈÅãÂãïÔºåÁà≠ÂèñÁ®ÆÊóèÂπ≥Á≠â",
                            "ÁôºÊòé‰∫ÜÈõªË¶ñÊ©ü"
                        ],
                        correctIndex: 1,
                        keyPoints: [
                            "È¶¨‰∏ÅË∑ØÂæ∑ÈáëÔºàMartin Luther King Jr.ÔºâÊñº1963Âπ¥Âú®ËèØÁõõÈ†ìÁôºË°®‰∫ÜËëóÂêçÁöÑ„ÄäÊàëÊúâ‰∏ÄÂÄãÂ§¢ÊÉ≥„ÄãÊºîË™™",
                            "‰ªñÂÄ°Â∞éÈùûÊö¥ÂäõÊäµÊäóÊñπÂºèÔºåÁà≠ÂèñÈùûË£îÁæéÂúã‰∫∫ÁöÑÂπ≥Á≠âÊ¨äÂà©",
                            "‰ªñÁöÑÂä™Âäõ‰øÉÊàê‰∫Ü1964Âπ¥„ÄäÊ∞ëÊ¨äÊ≥ïÊ°à„ÄãÂíå1965Âπ¥„ÄäÊäïÁ•®Ê¨äÊ≥ïÊ°à„ÄãÁöÑÈÄöÈÅé"
                        ],
                        sceneType: "mlk",
                        emoji: "‚úä",
                        completed: false
                    },
                    {
                        id: 9,
                        title: "ÁîòÂú∞ËàáÂç∞Â∫¶Áç®Á´ã",
                        background: "20‰∏ñÁ¥Ä‰∏äÂçäËëâÔºåÂç∞Â∫¶ÊòØËã±ÂúãÁöÑÊÆñÊ∞ëÂú∞ÔºåÂç∞Â∫¶‰∫∫Ê∞ëÊ∏¥ÊúõÁç®Á´ãËá™‰∏ª„ÄÇ",
                        alteredHistory: "ÁîòÂú∞Áî®È£õÊ©üÊîªÊìäËã±ÂúãÔºå‰ª•Ê≠¶ÂäõÁà≠ÂèñÂç∞Â∫¶Áç®Á´ã„ÄÇ",
                        correctHistory: "ÁîòÂú∞ÔºàMahatma GandhiÔºâÊèêÂÄ°ÈùûÊö¥ÂäõÊäµÊäóÈÅãÂãïÔºåÈÄöÈÅéÂíåÂπ≥ÊñπÂºèÁà≠ÂèñÂç∞Â∫¶Áç®Á´ã„ÄÇ",
                        question: "ÁîòÂú∞Áî®‰ªÄÈ∫ºÊñπÂºèÁà≠ÂèñÂç∞Â∫¶Áç®Á´ãÔºü",
                        options: [
                            "Ê≠¶Ë£ùËµ∑Áæ©ÊîªÊìäËã±Âúã",
                            "ÈùûÊö¥ÂäõÊäµÊäóÈÅãÂãï",
                            "ÂêëËã±ÂúãÊîØ‰ªòÂ§ßÈáèÈáëÈå¢Ë≥ºË≤∑Áç®Á´ã"
                        ],
                        correctIndex: 1,
                        keyPoints: [
                            "ÁîòÂú∞ÔºàMahatma GandhiÔºâÊèêÂÄ°„ÄåÈùûÊö¥Âäõ‰∏çÂêà‰Ωú„ÄçÈÅãÂãïÔºåÂåÖÊã¨ÊäµÂà∂Ëã±ÂúãÂïÜÂìÅ„ÄÅÂíåÂπ≥Á§∫Â®ÅÁ≠âÊñπÂºè",
                            "‰ªñÁöÑ„ÄåÈπΩÈÄ≤„ÄçÈÅãÂãïÊòØÈùûÊö¥ÂäõÊäµÊäóÁöÑÂÖ∏ÁØÑÔºåÊäóË≠∞Ëã±ÂúãÂ∞çÈπΩÁöÑÂ£üÊñ∑",
                            "ÁîòÂú∞ÁöÑÂíåÂπ≥ÊäµÊäóÁêÜÂøµÂΩ±Èüø‰∫ÜÂÖ®ÁêÉË®±Â§öÊ∞ëÊ¨äÈÅãÂãïÈ†òË¢ñ"
                        ],
                        sceneType: "gandhi",
                        emoji: "‚òÆÔ∏è",
                        completed: false
                    },
                    {
                        id: 10,
                        title: "Âç∞Âà∑Ë°ìÁöÑÁôºÊòé",
                        background: "15‰∏ñÁ¥Ä‰∏≠ÊúüÔºåÊ≠êÊ¥≤ÁöÑÊõ∏Á±ç‰∏ªË¶ÅÁî±‰øÆÈÅìÈô¢ÂÉß‰æ∂ÊâãÊäÑÔºåÊàêÊú¨È´òÊòÇÔºåÊôÆÈÄö‰∫∫Èõ£‰ª•Êé•Ëß∏Âà∞Êõ∏Á±ç„ÄÇ",
                        alteredHistory: "Âç∞Âà∑Ë°ìÊòØÈüìÂúã BTS ÁôºÊòéÁöÑÔºåÁî®‰æÜÂç∞Ë£ΩÂ∞àËºØÂ∞ÅÈù¢„ÄÇ",
                        correctHistory: "Âè§È®∞Â†°ÔºàJohannes GutenbergÔºâÊñº15‰∏ñÁ¥ÄÊîπËâØÊ¥ªÂ≠óÂç∞Âà∑Ë°ìÔºåÂ§ßÂ§ßÈôç‰Ωé‰∫ÜÊõ∏Á±çÊàêÊú¨Ôºå‰øÉÈÄ≤‰∫ÜÁü•Ë≠òÂÇ≥Êí≠„ÄÇ",
                        question: "Ë™∞Âú®15‰∏ñÁ¥ÄÊîπËâØ‰∫ÜÊ¥ªÂ≠óÂç∞Âà∑Ë°ìÔºü",
                        options: [
                            "ÈüìÂúã BTS ÁµÑÂêà",
                            "Á¥ÑÁø∞ÂÖßÊñØ¬∑Âè§È®∞Â†°ÔºàJohannes GutenbergÔºâ",
                            "ÂÖãÈáåÊñØÂ§öÁ¶è¬∑Âì•ÂÄ´Â∏ÉÔºàChristopher ColumbusÔºâ"
                        ],
                        correctIndex: 1,
                        keyPoints: [
                            "Á¥ÑÁø∞ÂÖßÊñØ¬∑Âè§È®∞Â†°ÔºàJohannes GutenbergÔºâÊñº1450Âπ¥‰ª£ÁôºÊòé‰∫ÜÈáëÂ±¨Ê¥ªÂ≠óÂç∞Âà∑Ë°ì",
                            "Ê¥ªÂ≠óÂç∞Âà∑Ë°ìÂ§ßÂ§ßÊèêÈ´ò‰∫ÜÊõ∏Á±çÁîüÁî¢ÊïàÁéáÔºåÈôç‰Ωé‰∫ÜÊàêÊú¨",
                            "Âç∞Âà∑Ë°ìÁöÑÁôºÊòé‰øÉÈÄ≤‰∫ÜÊñáËóùÂæ©ËààÂíåÂÆóÊïôÊîπÈù©ÔºåË¢´Ë™çÁÇ∫ÊòØ‰∫∫È°ûÊ≠∑Âè≤‰∏äÊúÄÈáçË¶ÅÁöÑÁôºÊòé‰πã‰∏Ä"
                        ],
                        sceneType: "gutenberg",
                        emoji: "üìö",
                        completed: false
                    }
                ]
            };
            
            // DOM Elements
            const drawerFront = document.getElementById('drawer-front');
            const timeMachineContainer = document.getElementById('time-machine-container');
            const startBtn = document.getElementById('start-btn');
            const timePortal = document.getElementById('time-portal');
            const homeScreen = document.getElementById('home-screen');
            const missionSelect = document.getElementById('mission-select');
            const missionScreen = document.getElementById('mission-screen');
            const reportScreen = document.getElementById('report-screen');
            const badgeScreen = document.getElementById('badge-screen');
            const repairAnimation = document.getElementById('repair-animation');
            const achievement = document.getElementById('achievement');
            
            // Initialize the game
            function initGame() {
                updateMissionCount();
                generateMissionCards();
                setupEventListeners();
                
                // Set current date for report
                const today = new Date();
                document.getElementById('report-date').textContent = `Êó•Êúü: ${today.getFullYear()}Âπ¥${today.getMonth() + 1}Êúà${today.getDate()}Êó•`;
            }
            
            // Update mission count display
            function updateMissionCount() {
                document.getElementById('missions-completed').textContent = gameState.missionsCompleted;
                document.getElementById('total-missions').textContent = gameState.missions.length;
            }
            
            // Generate mission cards
            function generateMissionCards() {
                const container = document.querySelector('#mission-select .grid');
                container.innerHTML = '';
                
                gameState.missions.forEach(mission => {
                    const card = document.createElement('div');
                    card.className = `mission-card ${mission.completed ? 'bg-green-50' : ''}`;
                    card.innerHTML = `
                        <h3 class="text-xl font-bold mb-2">${mission.emoji} ${mission.title}</h3>
                        <p class="mb-4">${mission.alteredHistory}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-sm ${mission.completed ? 'text-green-600' : 'text-gray-500'}">
                                ${mission.completed ? '‚úì Â∑≤ÂÆåÊàê' : '‚ö† ÂæÖ‰øÆÂæ©'}
                            </span>
                            <button class="start-mission btn-primary text-sm py-2 px-4" data-id="${mission.id}">
                                ${mission.completed ? 'Êü•ÁúãÂ†±Âëä' : 'ÈñãÂßã‰ªªÂãô'}
                            </button>
                        </div>
                    `;
                    container.appendChild(card);
                });
                
                // Add event listeners to mission buttons
                document.querySelectorAll('.start-mission').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const missionId = parseInt(this.getAttribute('data-id'));
                        const mission = gameState.missions.find(m => m.id === missionId);
                        
                        if (mission.completed) {
                            showReport(mission);
                        } else {
                            startMission(mission);
                        }
                    });
                });
            }
            
            // Setup event listeners
            function setupEventListeners() {
                // Drawer click to reveal time machine
                drawerFront.addEventListener('click', function() {
                    // Animate drawer opening
                    this.style.transform = 'translateY(120%)';
                    
                    // Show time machine with delay
                    setTimeout(() => {
                        timeMachineContainer.classList.add('visible');
                        
                        // Show start button after time machine appears
                        setTimeout(() => {
                            startBtn.classList.remove('hidden');
                        }, 1000);
                    }, 800);
                });
                
                // Start button click
                startBtn.addEventListener('click', function() {
                    timePortal.classList.add('active');
                    setTimeout(() => {
                        homeScreen.classList.add('hidden');
                        missionSelect.classList.remove('hidden');
                        timePortal.classList.remove('active');
                    }, 2000);
                });
                
                // Back to missions button
                document.getElementById('back-to-missions').addEventListener('click', function() {
                    missionScreen.classList.add('hidden');
                    missionSelect.classList.remove('hidden');
                });
                
                // Back to missions from report
                document.getElementById('back-to-missions-from-report').addEventListener('click', function() {
                    reportScreen.classList.add('hidden');
                    missionSelect.classList.remove('hidden');
                });
                
                // Check answer button
                document.getElementById('check-answer').addEventListener('click', checkAnswer);
                
                // Continue button after showing result
                document.getElementById('continue-btn').addEventListener('click', function() {
                    document.getElementById('result-container').classList.add('hidden');
                    
                    // Show repair animation
                    repairAnimation.classList.add('active');
                    
                    // Play scene-specific repair animation
                    playRepairAnimation();
                    
                    setTimeout(() => {
                        repairAnimation.classList.remove('active');
                        
                        // Mark mission as completed
                        gameState.currentMission.completed = true;
                        gameState.missionsCompleted++;
                        updateMissionCount();
                        
                        // Check for badge achievement
                        if (gameState.missionsCompleted === 5) {
                            showBadgeScreen();
                        } else {
                            showReport(gameState.currentMission);
                        }
                    }, 3000);
                });
                
                // Continue from badge screen
                document.getElementById('continue-from-badge').addEventListener('click', function() {
                    badgeScreen.classList.add('hidden');
                    showReport(gameState.currentMission);
                });
                
                // Download PDF button
                document.getElementById('download-pdf').addEventListener('click', function() {
                    const element = document.getElementById('report-content');
                    const filename = `Ê≠∑Âè≤ÁØ°ÊîπË™øÊü•Â±Ä_${gameState.currentMission.title}_Â≠∏ÁøíÂñÆ.pdf`;
                    
                    // Add a temporary class for PDF styling
                    element.classList.add('pdf-mode');
                    
                    const opt = {
                        margin: 10,
                        filename: filename,
                        image: { type: 'jpeg', quality: 0.98 },
                        html2canvas: { scale: 2 },
                        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
                    };
                    
                    // Generate PDF
                    html2pdf().set(opt).from(element).save().then(() => {
                        // Remove temporary class
                        element.classList.remove('pdf-mode');
                    });
                });
            }
            
            // Start a mission
            function startMission(mission) {
                gameState.currentMission = mission;
                gameState.selectedOption = null;
                
                // Set mission content
                document.getElementById('mission-title').textContent = mission.title;
                document.getElementById('mission-background').textContent = mission.background;
                document.getElementById('altered-history').textContent = mission.alteredHistory;
                document.getElementById('question').textContent = mission.question;
                
                // Generate options
                const optionsContainer = document.getElementById('options-container');
                optionsContainer.innerHTML = '';
                
                mission.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.textContent = option;
                    optionElement.setAttribute('data-index', index);
                    optionsContainer.appendChild(optionElement);
                    
                    optionElement.addEventListener('click', function() {
                        document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                        this.classList.add('selected');
                        gameState.selectedOption = parseInt(this.getAttribute('data-index'));
                    });
                });
                
                // Setup history scene
                setupHistoryScene(mission);
                
                // Hide result container
                document.getElementById('result-container').classList.add('hidden');
                
                // Show mission screen
                missionSelect.classList.add('hidden');
                missionScreen.classList.remove('hidden');
            }
            
            // Setup history scene based on mission type
            function setupHistoryScene(mission) {
                const scene = document.getElementById('history-scene');
                scene.innerHTML = '';
                
                // Add emoji to all scenes
                const emojiElement = document.createElement('div');
                emojiElement.className = 'scene-emoji';
                emojiElement.textContent = mission.emoji;
                emojiElement.style.opacity = '1'; // Make emoji visible by default
                scene.appendChild(emojiElement);
                
                switch (mission.sceneType) {
                    case 'edison':
                        scene.className = 'history-scene scene-edison';
                        
                        // Add candles
                        for (let i = 0; i < 3; i++) {
                            const candle = document.createElement('div');
                            candle.className = 'candle';
                            candle.style.left = `${20 + i * 30}%`;
                            scene.appendChild(candle);
                        }
                        
                        // Add light bulb (initially dim)
                        const bulb = document.createElement('div');
                        bulb.className = 'light-bulb';
                        scene.appendChild(bulb);
                        
                        // Add Edison character (initially hidden)
                        const edison = document.createElement('div');
                        edison.className = 'character edison';
                        scene.appendChild(edison);
                        break;
                        
                    case 'qin':
                        scene.className = 'history-scene scene-qin';
                        
                        // Add different text characters
                        const text1 = document.createElement('div');
                        text1.className = 'chinese-text text-different';
                        text1.textContent = 'Áî≤È™®Êñá';
                        text1.style.opacity = '1';
                        scene.appendChild(text1);
                        
                        const text2 = document.createElement('div');
                        text2.className = 'chinese-text text-different-2';
                        text2.textContent = 'ÈáëÊñá';
                        text2.style.opacity = '1';
                        scene.appendChild(text2);
                        
                        const text3 = document.createElement('div');
                        text3.className = 'chinese-text text-different-3';
                        text3.textContent = 'ÁØÜÊõ∏';
                        text3.style.opacity = '1';
                        scene.appendChild(text3);
                        
                        // Add unified text (initially hidden)
                        const unifiedText = document.createElement('div');
                        unifiedText.className = 'chinese-text text-unified';
                        unifiedText.textContent = 'Â∞èÁØÜ';
                        unifiedText.style.opacity = '0';
                        scene.appendChild(unifiedText);
                        
                        // Add Qin Emperor character (initially hidden)
                        const qinEmperor = document.createElement('div');
                        qinEmperor.className = 'character qin-emperor';
                        scene.appendChild(qinEmperor);
                        break;
                        
                    case 'wright':
                        scene.className = 'history-scene scene-wright';
                        
                        // Add Wright brothers' airplane (initially hidden)
                        const airplane = document.createElement('div');
                        airplane.className = 'character wright-brothers';
                        scene.appendChild(airplane);
                        break;
                        
                    case 'newton':
                        scene.className = 'history-scene scene-newton';
                        
                        // Add Newton character (initially hidden)
                        const newton = document.createElement('div');
                        newton.className = 'character newton';
                        scene.appendChild(newton);
                        
                        // Add apple (initially hidden)
                        const apple = document.createElement('div');
                        apple.className = 'apple';
                        scene.appendChild(apple);
                        break;
                        
                    case 'tesla':
                        scene.className = 'history-scene scene-tesla';
                        
                        // Add Tesla character (initially hidden)
                        const tesla = document.createElement('div');
                        tesla.className = 'character tesla';
                        scene.appendChild(tesla);
                        
                        // Add lightning (initially hidden)
                        const lightning = document.createElement('div');
                        lightning.className = 'lightning';
                        scene.appendChild(lightning);
                        break;
                        
                    case 'paper':
                        scene.className = 'history-scene scene-paper';
                        
                        // Add paper scroll (initially hidden)
                        const paperScroll = document.createElement('div');
                        paperScroll.className = 'paper-scroll';
                        scene.appendChild(paperScroll);
                        break;
                        
                    case 'columbus':
                        scene.className = 'history-scene scene-columbus';
                        
                        // Add ship (initially hidden)
                        const ship = document.createElement('div');
                        ship.className = 'ship';
                        ship.innerHTML = 'üö¢';
                        ship.style.fontSize = '60px';
                        scene.appendChild(ship);
                        break;
                        
                    case 'mlk':
                        scene.className = 'history-scene scene-mlk';
                        
                        // Add speech bubble (initially hidden)
                        const speechBubble = document.createElement('div');
                        speechBubble.className = 'speech-bubble';
                        speechBubble.textContent = 'I have a dream';
                        scene.appendChild(speechBubble);
                        break;
                        
                    case 'gandhi':
                        scene.className = 'history-scene scene-gandhi';
                        
                        // Add flag (initially hidden)
                        const flag = document.createElement('div');
                        flag.className = 'flag';
                        scene.appendChild(flag);
                        break;
                        
                    case 'gutenberg':
                        scene.className = 'history-scene scene-gutenberg';
                        
                        // Add printing press (initially hidden)
                        const printingPress = document.createElement('div');
                        printingPress.className = 'printing-press';
                        scene.appendChild(printingPress);
                        
                        // Add printed page (initially hidden)
                        const printedPage = document.createElement('div');
                        printedPage.className = 'printed-page';
                        scene.appendChild(printedPage);
                        break;
                        
                    default:
                        scene.className = 'history-scene';
                        scene.style.background = 'linear-gradient(to bottom, #90cdf4 0%, #2b6cb0 100%)';
                        break;
                }
            }
            
            // Check the selected answer
            function checkAnswer() {
                if (gameState.selectedOption === null) {
                    alert('Ë´ãÈÅ∏Êìá‰∏ÄÂÄãÁ≠îÊ°àÔºÅ');
                    return;
                }
                
                const resultContainer = document.getElementById('result-container');
                const resultTitle = document.getElementById('result-title');
                const resultMessage = document.getElementById('result-message');
                
                if (gameState.selectedOption === gameState.currentMission.correctIndex) {
                    resultTitle.textContent = 'Á≠îÂ∞ç‰∫ÜÔºÅ';
                    resultMessage.textContent = '‰Ω†ÊàêÂäüÊâæÂá∫‰∫ÜÊ≠∑Âè≤‰∏≠ÁöÑÈåØË™§ÔºÅÊ∫ñÂÇô‰øÆÂæ©ÊôÇÈñìÁ∑ö...';
                    resultTitle.className = 'text-xl font-bold mb-4 text-green-600';
                } else {
                    resultTitle.textContent = 'Á≠îÈåØ‰∫ÜÔºÅ';
                    resultMessage.textContent = 'ÈÄô‰∏çÊòØÊ≠£Á¢∫ÁöÑÊ≠∑Âè≤„ÄÇÂÜç‰ªîÁ¥∞ÊÉ≥ÊÉ≥...';
                    resultTitle.className = 'text-xl font-bold mb-4 text-red-600';
                    
                    // Highlight correct and incorrect options
                    document.querySelectorAll('.option').forEach((option, index) => {
                        if (index === gameState.currentMission.correctIndex) {
                            option.classList.add('correct');
                        }
                        if (index === gameState.selectedOption) {
                            option.classList.add('incorrect');
                        }
                    });
                    
                    return;
                }
                
                resultContainer.classList.remove('hidden');
            }
            
            // Play repair animation based on mission type
            function playRepairAnimation() {
                const scene = document.getElementById('history-scene');
                
                // Make emoji bounce
                const emoji = scene.querySelector('.scene-emoji');
                emoji.classList.add('visible');
                
                switch (gameState.currentMission.sceneType) {
                    case 'edison':
                        // Light up the bulb
                        const bulb = scene.querySelector('.light-bulb');
                        bulb.classList.add('lit');
                        
                        // Show Edison
                        const edison = scene.querySelector('.edison');
                        edison.style.opacity = '1';
                        
                        // Hide candles
                        const candles = scene.querySelectorAll('.candle');
                        candles.forEach(candle => {
                            candle.style.opacity = '0';
                        });
                        break;
                        
                    case 'qin':
                        // Hide different texts
                        const differentTexts = scene.querySelectorAll('.text-different, .text-different-2, .text-different-3');
                        differentTexts.forEach(text => {
                            text.style.opacity = '0';
                        });
                        
                        // Show unified text
                        const unifiedText = scene.querySelector('.text-unified');
                        unifiedText.style.opacity = '1';
                        
                        // Show Qin Emperor
                        const qinEmperor = scene.querySelector('.qin-emperor');
                        qinEmperor.style.opacity = '1';
                        break;
                        
                    case 'wright':
                        // Show Wright brothers' airplane
                        const airplane = scene.querySelector('.wright-brothers');
                        airplane.style.opacity = '1';
                        break;
                        
                    case 'newton':
                        // Show Newton
                        const newton = scene.querySelector('.newton');
                        newton.style.opacity = '1';
                        
                        // Show and animate apple falling
                        const apple = scene.querySelector('.apple');
                        apple.style.opacity = '1';
                        setTimeout(() => {
                            apple.classList.add('falling');
                        }, 500);
                        break;
                        
                    case 'tesla':
                        // Show Tesla
                        const tesla = scene.querySelector('.tesla');
                        tesla.style.opacity = '1';
                        
                        // Animate lightning
                        const lightning = scene.querySelector('.lightning');
                        lightning.classList.add('active');
                        break;
                        
                    case 'paper':
                        // Show paper scroll
                        const paperScroll = scene.querySelector('.paper-scroll');
                        paperScroll.classList.add('visible');
                        break;
                        
                    case 'columbus':
                        // Animate ship sailing
                        const ship = scene.querySelector('.ship');
                        ship.classList.add('sailing');
                        break;
                        
                    case 'mlk':
                        // Show speech bubble
                        const speechBubble = scene.querySelector('.speech-bubble');
                        speechBubble.classList.add('visible');
                        break;
                        
                    case 'gandhi':
                        // Show flag
                        const flag = scene.querySelector('.flag');
                        flag.classList.add('visible');
                        break;
                        
                    case 'gutenberg':
                        // Show printing press
                        const printingPress = scene.querySelector('.printing-press');
                        printingPress.classList.add('visible');
                        
                        // Show printed page
                        const printedPage = scene.querySelector('.printed-page');
                        printedPage.classList.add('visible');
                        break;
                }
            }
            
            // Show mission report
            function showReport(mission) {
                document.getElementById('report-mission-title').textContent = mission.title;
                document.getElementById('report-altered').textContent = mission.alteredHistory;
                document.getElementById('report-correct').textContent = mission.correctHistory;
                
                // Generate key points
                const keyPointsList = document.getElementById('report-key-points');
                keyPointsList.innerHTML = '';
                mission.keyPoints.forEach(point => {
                    const li = document.createElement('li');
                    li.textContent = point;
                    keyPointsList.appendChild(li);
                });
                
                missionScreen.classList.add('hidden');
                reportScreen.classList.remove('hidden');
                
                // Update mission cards
                generateMissionCards();
            }
            
            // Show badge screen
            function showBadgeScreen() {
                missionScreen.classList.add('hidden');
                badgeScreen.classList.remove('hidden');
                
                // Show achievement notification
                setTimeout(() => {
                    achievement.classList.add('show');
                    setTimeout(() => {
                        achievement.classList.remove('show');
                    }, 5000);
                }, 500);
            }
            
            // Initialize the game
            initGame();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9696b9a5371bf1f4',t:'MTc1NDIzMzY1Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
